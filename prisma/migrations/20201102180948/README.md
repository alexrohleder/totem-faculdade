# Migration `20201102180948`

This migration has been generated by Alex Rohleder at 11/2/2020, 7:09:48 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Institution" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "logo" TEXT NOT NULL,
    "backgroundColor" TEXT NOT NULL,
    "homeMedia" TEXT NOT NULL,
    "homeMediaType" TEXT NOT NULL DEFAULT 'video'
)

CREATE TABLE "Item" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "parentId" INTEGER,
    "institutionId" INTEGER NOT NULL,
    "title" TEXT NOT NULL,
    "style" TEXT NOT NULL,
    "content" TEXT,

    FOREIGN KEY ("parentId") REFERENCES "Item"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY ("institutionId") REFERENCES "Institution"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "Institution.name_unique" ON "Institution"("name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201102180948
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,34 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model Institution {
+  id              Int    @id @default(autoincrement())
+  name            String @unique
+  logo            String
+  backgroundColor String
+  homeMedia       String
+  homeMediaType   String @default("video")
+  items           Item[]
+}
+
+model Item {
+  id            Int     @id @default(autoincrement())
+  parentId      Int?
+  institutionId Int
+  title         String
+  style         String
+  content       String? // markdown
+
+  parent      Item?       @relation("ItemToItem", fields: [parentId], references: [id])
+  children    Item[]      @relation("ItemToItem")
+  institution Institution @relation(fields: [institutionId], references: [id])
+}
```


